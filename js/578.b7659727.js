"use strict";(globalThis["webpackChunkpok"]=globalThis["webpackChunkpok"]||[]).push([[578],{4137:(e,t,s)=>{s.r(t),s.d(t,{default:()=>W});var l=s(1758);function n(e,t,s,n,r,a){const i=(0,l.g2)("instrument-control-fixed"),u=(0,l.g2)("q-card-section"),o=(0,l.g2)("q-card"),d=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(d,{nopadding:""},{default:(0,l.k6)((()=>[(0,l.bF)(o,{flat:""},{default:(0,l.k6)((()=>[(0,l.bF)(u,{class:"q-mt-xl",horizontal:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.instruments,(e=>((0,l.uX)(),(0,l.Wv)(i,{key:e.id,selectedInstrumentName:e.name,selectedInstrumentId:e.id,selectedInstrumentHasTuner:"guitar"===e.type},null,8,["selectedInstrumentName","selectedInstrumentId","selectedInstrumentHasTuner"])))),128))])),_:1})])),_:1})])),_:1})}var r=s(8790),a=s(7673),i=s.n(a),u=s(9394),o=s.n(u);const d=e=>((0,l.Qi)("data-v-2de9fed8"),e=e(),(0,l.jt)(),e),c={class:"text-h5"},m=d((()=>(0,l.Lk)("img",{class:"icon-img",src:i()},null,-1))),h=d((()=>(0,l.Lk)("img",{class:"icon-img",src:o()},null,-1))),p={class:"col-5"},g={class:"full-width q-mb-md flex flex-center"},f={class:"full-width flex flex-center"},k={class:"full-width q-mt-md q-mb-xl flex flex-center"},b={class:"full-width flex flex-center"},v={class:"col-7"},I=d((()=>(0,l.Lk)("div",{class:"q-mt-lg"}," Instrument ist stummgeschaltet ",-1)));function _(e,t,s,n,a,i){const u=(0,l.g2)("tuner-dialog"),o=(0,l.g2)("panorama-dialog"),d=(0,l.g2)("q-fab-action"),_=(0,l.g2)("q-fab"),C=(0,l.g2)("q-card-section"),x=(0,l.g2)("q-btn"),F=(0,l.g2)("q-slider"),q=(0,l.g2)("q-card");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(u,{ref:"tunerDialog"},null,512),(0,l.bF)(o,{ref:"panoramaDialog"},null,512),(0,l.bF)(q,{flat:"",class:"fixed-width q-mr-xl"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{class:"q-pb-xl"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",c,(0,r.v_)(s.selectedInstrumentName),1),a.isMuted?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(_,{key:0,class:"float-right",color:"primary",icon:"keyboard_arrow_left",direction:"left"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{onClick:i.toggleMute,icon:"volume_off"},null,8,["onClick"]),(0,l.bF)(d,{onClick:i.openPanoramaSelect},{default:(0,l.k6)((()=>[m])),_:1},8,["onClick"]),s.selectedInstrumentHasTuner?((0,l.uX)(),(0,l.Wv)(d,{key:0,onClick:i.openTuner},{default:(0,l.k6)((()=>[h])),_:1},8,["onClick"])):(0,l.Q3)("",!0)])),_:1}))])),_:1}),a.isMuted?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(C,{key:0,flat:"",class:"full-width q-pa-none row no-wrap items-start q-pa-none"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",p,[(0,l.bF)(q,{flat:""},{default:(0,l.k6)((()=>[(0,l.bF)(C,{class:"q-mr-sm"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",g,[(0,l.bF)(x,{disable:a.isMuted,round:"",icon:"volume_up",color:"primary",onClick:t[0]||(t[0]=e=>i.changeVolume(1)),size:"lg"},null,8,["disable"])]),(0,l.Lk)("div",f,[(0,l.bF)(F,{disable:a.isMuted,class:"vertical-slider",modelValue:i.intVolume,"onUpdate:modelValue":t[1]||(t[1]=e=>i.intVolume=e),"track-size":"40px","thumb-size":"0px",color:"grey-6",reverse:"",min:0,max:100,vertical:""},null,8,["disable","modelValue"])]),(0,l.Lk)("div",k,[(0,l.bF)(x,{disable:a.isMuted,round:"",icon:"volume_down",color:"primary",onClick:t[2]||(t[2]=e=>i.changeVolume(-1)),size:"lg"},null,8,["disable"])]),(0,l.Lk)("div",b,(0,r.v_)(i.displayVolume),1)])),_:1})])),_:1})]),(0,l.Lk)("div",v,[(0,l.bF)(q,{flat:""},{default:(0,l.k6)((()=>[(0,l.bF)(C,{class:"q-pl-xs q-pr-md"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.presets,((e,t)=>((0,l.uX)(),(0,l.Wv)(x,{padding:"",disable:a.isMuted,dense:"","no-wrap":"","no-caps":"",size:"lg",class:(0,r.C4)(["full-width q-mb-md q-pa-sm",i.getPresetButtonClass(t+1)]),label:a.presets[t],key:t,onClick:e=>i.selectPreset(t+1)},null,8,["disable","class","label","onClick"])))),128))])),_:1})])),_:1})])])),_:1})),a.isMuted?((0,l.uX)(),(0,l.Wv)(C,{key:1,flat:"",class:"column items-center",style:{"margin-top":"100px"}},{default:(0,l.k6)((()=>[(0,l.bF)(x,{round:"",icon:"volume_off",color:"primary",onClick:i.toggleMute,size:"xl"},null,8,["onClick"]),I])),_:1})):(0,l.Q3)("",!0)])),_:1})],64)}var C=s(6166),x=s(9627),F=s(2649);const q={setup(){},created(){this.updateInstrumentState(this.selectedInstrumentId)},name:"InstrumentControl",data(){return{volume:30,isMuted:!1,currentPreset:null,presets:[]}},components:{TunerDialog:x.A,PanoramaDialog:F.A},props:{selectedInstrumentName:{type:String},selectedInstrumentId:{type:Number},selectedInstrumentHasTuner:{type:Boolean}},computed:{intVolume:{get(){return this.volume},set(e){let t=parseInt(e,10);this.changeVolume(t-this.volume)}},displayVolume:{get(){return"LautstÃ¤rke "+this.volume+" %"}}},methods:{getPresetButtonClass(e){return{"bg-primary text-white":e===this.currentPreset}},getMuteButtonClass(){return{"bg-primary text-white":this.isMuted}},openPanoramaSelect(){this.$refs.panoramaDialog.show(this.selectedInstrumentId)},openTuner(){this.$refs.tunerDialog.show(this.selectedInstrumentId)},updateInstrumentState(e){e&&(0,C.Qy)(e).then((e=>{this.isMuted=e.data.is_muted,this.volume=e.data.volume,this.currentPreset=e.data.selected_preset.id,this.presets=e.data.presets.slice(0,6).map((e=>e.name))})).catch((e=>{console.error("Error fetching instrument state:",e)}))},toggleMute(){(0,C.$r)(this.selectedInstrumentId).then((e=>{this.isMuted=e.data.is_muted})).catch((e=>{console.error("Error toggling mute:",e)}))},changeVolume(e){this.volume=Math.max(0,Math.min(100,this.volume+e)),(0,C.RV)(this.selectedInstrumentId,this.volume).then((e=>{this.volume=e.data.volume})).catch((e=>{console.error("Error setting volume:",e)}))},selectPreset(e){this.currentPreset=e,(0,C.LO)(this.selectedInstrumentId,e).then((e=>{this.currentPreset=e.data.selected_preset.id})).catch((e=>{console.error("Error setting preset:",e)}))}}};var y=s(2807),w=s(3316),M=s(4189),Q=s(1878),A=s(284),P=s(6384),V=s(1444),L=s(8582),X=s.n(L);const D=(0,y.A)(q,[["render",_],["__scopeId","data-v-2de9fed8"]]),T=D;X()(q,"components",{QCard:w.A,QCardSection:M.A,QFab:Q.A,QFabAction:A.A,QBtn:P.A,QSlider:V.A});const E={components:{InstrumentControlFixed:T},data(){return{instruments:[],instrumentFilter:[]}},created(){this.loadRoutData(),this.fetchInstruments()},watch:{$route(){this.loadRoutData(),this.fetchInstruments()}},methods:{loadRoutData(){this.instrumentFilter=this.$route.params.filter.split("-and-")},fetchInstruments(){(0,C.pB)().then((e=>{this.instruments=e.data.filter((e=>this.instrumentFilter.includes(e.type)))})).catch((e=>{console.error("Error fetching instruments:",e)}))}}};var S=s(7716);const z=(0,y.A)(E,[["render",n]]),W=z;X()(E,"components",{QPage:S.A,QCard:w.A,QCardSection:M.A})}}]);