"use strict";(globalThis["webpackChunkpok"]=globalThis["webpackChunkpok"]||[]).push([[439],{4166:(e,t,s)=>{s.r(t),s.d(t,{default:()=>B});var l=s(1758);function n(e,t,s,n,r,a){const o=(0,l.g2)("instrument-control"),u=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(u,null,{default:(0,l.k6)((()=>[(0,l.bF)(o)])),_:1})}var r=s(8790),a=s(7673),o=s.n(a),u=s(9394),i=s.n(u);const c=e=>((0,l.Qi)("data-v-acf54e44"),e=e(),(0,l.jt)(),e),d=c((()=>(0,l.Lk)("img",{class:"icon-img",src:o()},null,-1))),m=c((()=>(0,l.Lk)("img",{class:"icon-img",src:i()},null,-1))),g={class:"col-5"},h={class:"full-width q-mb-md flex flex-center"},p={class:"full-width flex flex-center"},f={class:"full-width q-mt-md q-mb-xl flex flex-center"},k={class:"full-width flex flex-center"},b={class:"col-7"},I=c((()=>(0,l.Lk)("div",{class:"q-mt-lg"}," Instrument ist stummgeschaltet ",-1)));function v(e,t,s,n,a,o){const u=(0,l.g2)("instrument-selector-dialog"),i=(0,l.g2)("tuner-dialog"),c=(0,l.g2)("panorama-dialog"),v=(0,l.g2)("q-btn"),_=(0,l.g2)("q-fab-action"),C=(0,l.g2)("q-fab"),F=(0,l.g2)("q-card-section"),q=(0,l.g2)("q-slider"),w=(0,l.g2)("q-card");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(u,{ref:"instrumentSelector"},null,512),(0,l.bF)(i,{ref:"tunerDialog"},null,512),(0,l.bF)(c,{ref:"panoramaDialog"},null,512),(0,l.bF)(w,{flat:""},{default:(0,l.k6)((()=>[(0,l.bF)(F,{class:"q-pb-xl"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{class:"q-mt-sm","no-caps":"",rounded:"",onClick:o.openInstrumentSelector},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(n.selectedInstrumentName||"Wähle dein Instrument"),1)])),_:1},8,["onClick"]),n.selectedInstrumentId&&!a.isMuted?((0,l.uX)(),(0,l.Wv)(C,{key:0,class:"float-right",color:"primary",icon:"keyboard_arrow_left",direction:"left"},{default:(0,l.k6)((()=>[(0,l.bF)(_,{onClick:o.toggleMute,icon:"volume_off"},null,8,["onClick"]),(0,l.bF)(_,{onClick:o.openPanoramaSelect},{default:(0,l.k6)((()=>[d])),_:1},8,["onClick"]),n.selectedInstrumentHasTuner?((0,l.uX)(),(0,l.Wv)(_,{key:0,onClick:o.openTuner},{default:(0,l.k6)((()=>[m])),_:1},8,["onClick"])):(0,l.Q3)("",!0)])),_:1})):(0,l.Q3)("",!0)])),_:1}),n.selectedInstrumentId&&!a.isMuted?((0,l.uX)(),(0,l.Wv)(F,{key:0,flat:"",class:"full-width q-pa-none row no-wrap items-start q-pa-none"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",g,[(0,l.bF)(w,{flat:""},{default:(0,l.k6)((()=>[(0,l.bF)(F,{class:"q-mr-sm"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",h,[(0,l.bF)(v,{disable:a.isMuted,round:"",icon:"volume_up",color:"primary",onClick:t[0]||(t[0]=e=>o.changeVolume(1)),size:"lg"},null,8,["disable"])]),(0,l.Lk)("div",p,[(0,l.bF)(q,{disable:a.isMuted,class:"vertical-slider",modelValue:o.intVolume,"onUpdate:modelValue":t[1]||(t[1]=e=>o.intVolume=e),"track-size":"40px","thumb-size":"0px",color:"grey-6",reverse:"",min:0,max:100,vertical:""},null,8,["disable","modelValue"])]),(0,l.Lk)("div",f,[(0,l.bF)(v,{disable:a.isMuted,round:"",icon:"volume_down",color:"primary",onClick:t[2]||(t[2]=e=>o.changeVolume(-1)),size:"lg"},null,8,["disable"])]),(0,l.Lk)("div",k,(0,r.v_)(o.displayVolume),1)])),_:1})])),_:1})]),(0,l.Lk)("div",b,[(0,l.bF)(w,{flat:""},{default:(0,l.k6)((()=>[(0,l.bF)(F,{class:"q-pl-xs q-pr-md"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.presets,((e,t)=>((0,l.uX)(),(0,l.Wv)(v,{padding:"",disable:a.isMuted,dense:"","no-wrap":"","no-caps":"",size:"lg",class:(0,r.C4)(["full-width q-mb-md q-pa-sm",o.getPresetButtonClass(t+1)]),label:a.presets[t],key:t,onClick:e=>o.selectPreset(t+1)},null,8,["disable","class","label","onClick"])))),128))])),_:1})])),_:1})])])),_:1})):(0,l.Q3)("",!0),n.selectedInstrumentId&&a.isMuted?((0,l.uX)(),(0,l.Wv)(F,{key:1,flat:"",class:"column items-center",style:{"margin-top":"120px"}},{default:(0,l.k6)((()=>[(0,l.bF)(v,{round:"",icon:"volume_off",color:"primary",onClick:o.toggleMute,size:"xl"},null,8,["onClick"]),I])),_:1})):(0,l.Q3)("",!0)])),_:1})],64)}var _=s(6394),C=s(6166),F=s(4477),q=s(9627),w=s(2649);const x={setup(){const e=(0,_.Q)(),t=(0,l.EW)((()=>e.getSelectedInstrumentName)),s=(0,l.EW)((()=>e.getSelectedInstrumentId)),n=(0,l.EW)((()=>e.selectedInstrumentHasTuner));return{selectedInstrumentName:t,selectedInstrumentId:s,selectedInstrumentHasTuner:n}},created(){const e=(0,_.Q)();this.updateInstrumentState(e.getSelectedInstrumentId)},name:"InstrumentControl",data(){return{isLoading:!0,volume:30,isMuted:!1,currentPreset:null,presets:[]}},components:{InstrumentSelectorDialog:F.A,TunerDialog:q.A,PanoramaDialog:w.A},computed:{intVolume:{get(){return this.volume},set(e){let t=parseInt(e,10);this.changeVolume(t-this.volume)}},displayVolume:{get(){return"Lautstärke "+this.volume+" %"}}},mounted(){const e=(0,_.Q)();(0,l.wB)((()=>e.selectedInstrumentId),(e=>{this.updateInstrumentState(e)}))},methods:{getPresetButtonClass(e){return{"bg-primary text-white":e===this.currentPreset}},getMuteButtonClass(){return{"bg-primary text-white":this.isMuted}},openPanoramaSelect(){this.$refs.panoramaDialog.show(this.selectedInstrumentId)},openInstrumentSelector(){this.$refs.instrumentSelector.show()},openTuner(){this.$refs.tunerDialog.show(this.selectedInstrumentId)},updateInstrumentState(e){e&&((0,C.Qy)(e).then((e=>{this.isMuted=e.data.is_muted,this.volume=e.data.volume,this.currentPreset=e.data.selected_preset.id,this.presets=e.data.presets.slice(0,6).map((e=>e.name))})).catch((e=>{console.error("Error fetching instrument state:",e)})),this.isLoading=!1)},toggleMute(){const e=(0,_.Q)(),t=e.getSelectedInstrumentId;t&&(this.isMuted=!this.isMuted,(0,C.$r)(t).then((e=>{this.isMuted=e.data.is_muted})).catch((e=>{console.error("Error toggling mute:",e)})))},changeVolume(e){const t=(0,_.Q)(),s=t.getSelectedInstrumentId;s&&(this.volume=Math.max(0,Math.min(100,this.volume+e)),(0,C.RV)(s,this.volume).then((e=>{this.volume=e.data.volume})).catch((e=>{console.error("Error setting volume:",e)})))},selectPreset(e){const t=(0,_.Q)(),s=t.getSelectedInstrumentId;s&&(this.currentPreset=e,(0,C.LO)(s,e).then((e=>{this.currentPreset=e.data.selected_preset.id})).catch((e=>{console.error("Error setting preset:",e)})))}}};var M=s(2807),Q=s(3316),S=s(4189),y=s(6384),A=s(1878),L=s(284),P=s(1444),V=s(8582),W=s.n(V);const E=(0,M.A)(x,[["render",v],["__scopeId","data-v-acf54e44"]]),T=E;W()(x,"components",{QCard:Q.A,QCardSection:S.A,QBtn:y.A,QFab:A.A,QFabAction:L.A,QSlider:P.A});const X={components:{InstrumentControl:T}};var D=s(7716);const z=(0,M.A)(X,[["render",n]]),B=z;W()(X,"components",{QPage:D.A})}}]);