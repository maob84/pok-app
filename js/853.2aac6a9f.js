"use strict";(globalThis["webpackChunkpok"]=globalThis["webpackChunkpok"]||[]).push([[853],{5428:(e,t,s)=>{s.r(t),s.d(t,{default:()=>X});var n=s(1758);function l(e,t,s,l,r,o){const a=(0,n.g2)("instrument-control"),u=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(a)])),_:1})}var r=s(8790),o=s(9394),a=s.n(o);const u=e=>((0,n.Qi)("data-v-43bf9b6e"),e=e(),(0,n.jt)(),e),i=u((()=>(0,n.Lk)("img",{class:"icon-img",src:a()},null,-1))),c={class:"col-5"},d={class:"full-width q-mb-md flex flex-center"},m={class:"full-width flex flex-center"},g={class:"full-width q-mt-md q-mb-xl flex flex-center"},h={class:"full-width flex flex-center"},p={class:"col-7"},f=u((()=>(0,n.Lk)("div",{class:"q-mt-lg"}," Instrument ist stummgeschaltet ",-1)));function b(e,t,s,l,o,a){const u=(0,n.g2)("instrument-selector-dialog"),b=(0,n.g2)("tuner-dialog"),k=(0,n.g2)("panorama-dialog"),I=(0,n.g2)("q-btn"),v=(0,n.g2)("q-fab-action"),_=(0,n.g2)("q-fab"),C=(0,n.g2)("q-card-section"),y=(0,n.g2)("q-slider"),F=(0,n.g2)("q-card");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(u,{ref:"instrumentSelector"},null,512),(0,n.bF)(b,{ref:"tunerDialog"},null,512),(0,n.bF)(k,{ref:"panoramaDialog"},null,512),(0,n.bF)(F,{flat:""},{default:(0,n.k6)((()=>[(0,n.bF)(C,{class:"q-pb-xl"},{default:(0,n.k6)((()=>[(0,n.bF)(I,{color:"secondary",class:"q-mt-sm","no-caps":"",rounded:"",onClick:a.openInstrumentSelector},{default:(0,n.k6)((()=>[(0,n.eW)((0,r.v_)(l.selectedInstrumentName||"Wähle dein Instrument"),1)])),_:1},8,["onClick"]),l.selectedInstrumentId&&!o.isMuted?((0,n.uX)(),(0,n.Wv)(_,{key:0,class:"float-right",color:"primary",icon:"keyboard_arrow_left",direction:"left"},{default:(0,n.k6)((()=>[(0,n.bF)(v,{color:"secondary",onClick:a.toggleMute,icon:"volume_off"},null,8,["onClick"]),(0,n.bF)(v,{color:"secondary",onClick:a.openPanoramaSelect,icon:"panorama_horizontal"},null,8,["onClick"]),l.selectedInstrumentHasTuner?((0,n.uX)(),(0,n.Wv)(v,{key:0,color:"secondary",onClick:a.openTuner},{default:(0,n.k6)((()=>[i])),_:1},8,["onClick"])):(0,n.Q3)("",!0)])),_:1})):(0,n.Q3)("",!0)])),_:1}),l.selectedInstrumentId&&!o.isMuted?((0,n.uX)(),(0,n.Wv)(C,{key:0,flat:"",class:"full-width q-pa-none row no-wrap items-start q-pa-none"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",c,[(0,n.bF)(F,{flat:""},{default:(0,n.k6)((()=>[(0,n.bF)(C,{class:"q-mr-sm"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",d,[(0,n.bF)(I,{disable:o.isMuted,round:"",icon:"volume_up",color:"primary",onClick:t[0]||(t[0]=e=>a.changeVolume(1)),size:"lg"},null,8,["disable"])]),(0,n.Lk)("div",m,[(0,n.bF)(y,{disable:o.isMuted,class:"vertical-slider",modelValue:a.intVolume,"onUpdate:modelValue":t[1]||(t[1]=e=>a.intVolume=e),"track-size":"40px","thumb-size":"0px",color:"grey-6",reverse:"",min:0,max:100,vertical:""},null,8,["disable","modelValue"])]),(0,n.Lk)("div",g,[(0,n.bF)(I,{disable:o.isMuted,round:"",icon:"volume_down",color:"primary",onClick:t[2]||(t[2]=e=>a.changeVolume(-1)),size:"lg"},null,8,["disable"])]),(0,n.Lk)("div",h,(0,r.v_)(a.displayVolume),1)])),_:1})])),_:1})]),(0,n.Lk)("div",p,[(0,n.bF)(F,{flat:""},{default:(0,n.k6)((()=>[(0,n.bF)(C,{class:"q-pl-md q-pr-lg"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.presets,((e,t)=>((0,n.uX)(),(0,n.Wv)(I,{padding:"",disable:o.isMuted,dense:"","no-wrap":"","no-caps":"",size:"md",class:(0,r.C4)(["full-width q-mb-md q-pa-md",a.getPresetButtonClass(t+1)]),label:o.presets[t],key:t,onClick:e=>a.selectPreset(t+1)},null,8,["disable","class","label","onClick"])))),128))])),_:1})])),_:1})])])),_:1})):(0,n.Q3)("",!0),l.selectedInstrumentId&&o.isMuted?((0,n.uX)(),(0,n.Wv)(C,{key:1,flat:"",class:"column items-center",style:{"margin-top":"120px"}},{default:(0,n.k6)((()=>[(0,n.bF)(I,{round:"",icon:"volume_off",color:"primary",onClick:a.toggleMute,size:"xl"},null,8,["onClick"]),f])),_:1})):(0,n.Q3)("",!0)])),_:1})],64)}var k=s(6394),I=s(6166),v=s(4477),_=s(9627),C=s(2649);const y={setup(){const e=(0,k.Q)(),t=(0,n.EW)((()=>e.getSelectedInstrumentName)),s=(0,n.EW)((()=>e.getSelectedInstrumentId)),l=(0,n.EW)((()=>e.selectedInstrumentHasTuner));return{selectedInstrumentName:t,selectedInstrumentId:s,selectedInstrumentHasTuner:l}},created(){const e=(0,k.Q)();this.updateInstrumentState(e.getSelectedInstrumentId)},name:"InstrumentControl",data(){return{isLoading:!0,volume:30,isMuted:!1,currentPreset:null,presets:[]}},components:{InstrumentSelectorDialog:v.A,TunerDialog:_.A,PanoramaDialog:C.A},computed:{intVolume:{get(){return this.volume},set(e){let t=parseInt(e,10);this.changeVolume(t-this.volume)}},displayVolume:{get(){return"Lautstärke "+this.volume+" %"}}},mounted(){const e=(0,k.Q)();(0,n.wB)((()=>e.selectedInstrumentId),(e=>{this.updateInstrumentState(e)}))},methods:{getPresetButtonClass(e){return this.currentPreset===e?"bg-primary text-white":"bg-secondary text-white"},getMuteButtonClass(){return{"bg-primary text-white":this.isMuted}},openPanoramaSelect(){this.$refs.panoramaDialog.show(this.selectedInstrumentId)},openInstrumentSelector(){this.$refs.instrumentSelector.show()},openTuner(){this.$refs.tunerDialog.show(this.selectedInstrumentId)},updateInstrumentState(e){e&&((0,I.Qy)(e).then((e=>{this.isMuted=e.data.is_muted,this.volume=e.data.volume,this.currentPreset=e.data.selected_preset.id,this.presets=e.data.presets.slice(0,6).map((e=>e.name))})).catch((e=>{console.error("Error fetching instrument state:",e)})),this.isLoading=!1)},toggleMute(){const e=(0,k.Q)(),t=e.getSelectedInstrumentId;t&&(this.isMuted=!this.isMuted,(0,I.$r)(t).then((e=>{this.isMuted=e.data.is_muted})).catch((e=>{console.error("Error toggling mute:",e)})))},changeVolume(e){const t=(0,k.Q)(),s=t.getSelectedInstrumentId;s&&(this.volume=Math.max(0,Math.min(100,this.volume+e)),(0,I.RV)(s,this.volume).then((e=>{this.volume=e.data.volume})).catch((e=>{console.error("Error setting volume:",e)})))},selectPreset(e){const t=(0,k.Q)(),s=t.getSelectedInstrumentId;s&&(this.currentPreset=e,(0,I.LO)(s,e).then((e=>{this.currentPreset=e.data.selected_preset.id})).catch((e=>{console.error("Error setting preset:",e)})))}}};var F=s(2807),q=s(3316),w=s(4189),x=s(6384),M=s(1878),Q=s(284),S=s(1444),A=s(8582),P=s.n(A);const V=(0,F.A)(y,[["render",b],["__scopeId","data-v-43bf9b6e"]]),L=V;P()(y,"components",{QCard:q.A,QCardSection:w.A,QBtn:x.A,QFab:M.A,QFabAction:Q.A,QSlider:S.A});const W={components:{InstrumentControl:L}};var E=s(7716);const T=(0,F.A)(W,[["render",l]]),X=T;P()(W,"components",{QPage:E.A})}}]);