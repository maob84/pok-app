"use strict";(globalThis["webpackChunkpok"]=globalThis["webpackChunkpok"]||[]).push([[74],{8105:(e,t,s)=>{s.r(t),s.d(t,{default:()=>z});var l=s(1758);function n(e,t,s,n,r,a){const o=(0,l.g2)("instrument-control-fixed"),i=(0,l.g2)("q-card-section"),u=(0,l.g2)("q-card"),d=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(d,{nopadding:""},{default:(0,l.k6)((()=>[(0,l.bF)(u,{flat:""},{default:(0,l.k6)((()=>[(0,l.bF)(i,{class:"q-mt-xl",horizontal:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(r.instruments,(e=>((0,l.uX)(),(0,l.Wv)(o,{key:e.id,selectedInstrumentName:e.name,selectedInstrumentId:e.id,selectedInstrumentHasTuner:"guitar"===e.type},null,8,["selectedInstrumentName","selectedInstrumentId","selectedInstrumentHasTuner"])))),128))])),_:1})])),_:1})])),_:1})}var r=s(8790),a=s(9394),o=s.n(a);const i=e=>((0,l.Qi)("data-v-f9b44aa4"),e=e(),(0,l.jt)(),e),u={class:"text-h5"},d=i((()=>(0,l.Lk)("img",{class:"icon-img",src:o()},null,-1))),c={class:"col-5"},m={class:"full-width q-mb-md flex flex-center"},h={class:"full-width flex flex-center"},p={class:"full-width q-mt-md q-mb-xl flex flex-center"},g={class:"full-width flex flex-center"},f={class:"col-7"},k=i((()=>(0,l.Lk)("div",{class:"q-mt-lg"}," Instrument ist stummgeschaltet ",-1)));function b(e,t,s,n,a,o){const i=(0,l.g2)("tuner-dialog"),b=(0,l.g2)("panorama-dialog"),v=(0,l.g2)("q-fab-action"),I=(0,l.g2)("q-fab"),_=(0,l.g2)("q-card-section"),C=(0,l.g2)("q-btn"),x=(0,l.g2)("q-slider"),F=(0,l.g2)("q-card");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(i,{ref:"tunerDialog"},null,512),(0,l.bF)(b,{ref:"panoramaDialog"},null,512),(0,l.bF)(F,{flat:"",class:"fixed-width q-mr-xl"},{default:(0,l.k6)((()=>[(0,l.bF)(_,{class:"q-pb-xl"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",u,(0,r.v_)(s.selectedInstrumentName),1),a.isMuted?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(I,{key:0,class:"float-right",color:"primary",icon:"keyboard_arrow_left",direction:"left"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{onClick:o.toggleMute,icon:"volume_off"},null,8,["onClick"]),(0,l.bF)(v,{onClick:o.openPanoramaSelect,icon:"panorama_horizontal"},null,8,["onClick"]),s.selectedInstrumentHasTuner?((0,l.uX)(),(0,l.Wv)(v,{key:0,onClick:o.openTuner},{default:(0,l.k6)((()=>[d])),_:1},8,["onClick"])):(0,l.Q3)("",!0)])),_:1}))])),_:1}),a.isMuted?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(_,{key:0,flat:"",class:"full-width q-pa-none row no-wrap items-start q-pa-none"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",c,[(0,l.bF)(F,{flat:""},{default:(0,l.k6)((()=>[(0,l.bF)(_,{class:"q-mr-sm"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",m,[(0,l.bF)(C,{disable:a.isMuted,round:"",icon:"volume_up",color:"primary",onClick:t[0]||(t[0]=e=>o.changeVolume(1)),size:"lg"},null,8,["disable"])]),(0,l.Lk)("div",h,[(0,l.bF)(x,{disable:a.isMuted,class:"vertical-slider",modelValue:o.intVolume,"onUpdate:modelValue":t[1]||(t[1]=e=>o.intVolume=e),"track-size":"40px","thumb-size":"0px",color:"grey-6",reverse:"",min:0,max:100,vertical:""},null,8,["disable","modelValue"])]),(0,l.Lk)("div",p,[(0,l.bF)(C,{disable:a.isMuted,round:"",icon:"volume_down",color:"primary",onClick:t[2]||(t[2]=e=>o.changeVolume(-1)),size:"lg"},null,8,["disable"])]),(0,l.Lk)("div",g,(0,r.v_)(o.displayVolume),1)])),_:1})])),_:1})]),(0,l.Lk)("div",f,[(0,l.bF)(F,{flat:""},{default:(0,l.k6)((()=>[(0,l.bF)(_,{class:"q-pl-xs q-pr-md"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.presets,((e,t)=>((0,l.uX)(),(0,l.Wv)(C,{padding:"",disable:a.isMuted,dense:"","no-wrap":"","no-caps":"",size:"lg",class:(0,r.C4)(["full-width q-mb-md q-pa-sm",o.getPresetButtonClass(t+1)]),label:a.presets[t],key:t,onClick:e=>o.selectPreset(t+1)},null,8,["disable","class","label","onClick"])))),128))])),_:1})])),_:1})])])),_:1})),a.isMuted?((0,l.uX)(),(0,l.Wv)(_,{key:1,flat:"",class:"column items-center",style:{"margin-top":"100px"}},{default:(0,l.k6)((()=>[(0,l.bF)(C,{round:"",icon:"volume_off",color:"primary",onClick:o.toggleMute,size:"xl"},null,8,["onClick"]),k])),_:1})):(0,l.Q3)("",!0)])),_:1})],64)}var v=s(6166),I=s(9627),_=s(2649);const C={setup(){},created(){this.updateInstrumentState(this.selectedInstrumentId)},name:"InstrumentControl",data(){return{volume:30,isMuted:!1,currentPreset:null,presets:[]}},components:{TunerDialog:I.A,PanoramaDialog:_.A},props:{selectedInstrumentName:{type:String},selectedInstrumentId:{type:Number},selectedInstrumentHasTuner:{type:Boolean}},computed:{intVolume:{get(){return this.volume},set(e){let t=parseInt(e,10);this.changeVolume(t-this.volume)}},displayVolume:{get(){return"LautstÃ¤rke "+this.volume+" %"}}},methods:{getPresetButtonClass(e){return{"bg-primary text-white":e===this.currentPreset}},getMuteButtonClass(){return{"bg-primary text-white":this.isMuted}},openPanoramaSelect(){this.$refs.panoramaDialog.show(this.selectedInstrumentId)},openTuner(){this.$refs.tunerDialog.show(this.selectedInstrumentId)},updateInstrumentState(e){e&&(0,v.Qy)(e).then((e=>{this.isMuted=e.data.is_muted,this.volume=e.data.volume,this.currentPreset=e.data.selected_preset.id,this.presets=e.data.presets.slice(0,6).map((e=>e.name))})).catch((e=>{console.error("Error fetching instrument state:",e)}))},toggleMute(){(0,v.$r)(this.selectedInstrumentId).then((e=>{this.isMuted=e.data.is_muted})).catch((e=>{console.error("Error toggling mute:",e)}))},changeVolume(e){this.volume=Math.max(0,Math.min(100,this.volume+e)),(0,v.RV)(this.selectedInstrumentId,this.volume).then((e=>{this.volume=e.data.volume})).catch((e=>{console.error("Error setting volume:",e)}))},selectPreset(e){this.currentPreset=e,(0,v.LO)(this.selectedInstrumentId,e).then((e=>{this.currentPreset=e.data.selected_preset.id})).catch((e=>{console.error("Error setting preset:",e)}))}}};var x=s(2807),F=s(3316),q=s(4189),y=s(1878),w=s(284),M=s(6384),Q=s(1444),A=s(8582),P=s.n(A);const V=(0,x.A)(C,[["render",b],["__scopeId","data-v-f9b44aa4"]]),L=V;P()(C,"components",{QCard:F.A,QCardSection:q.A,QFab:y.A,QFabAction:w.A,QBtn:M.A,QSlider:Q.A});const X={components:{InstrumentControlFixed:L},data(){return{instruments:[],instrumentFilter:[]}},created(){this.loadRoutData(),this.fetchInstruments()},watch:{$route(){this.loadRoutData(),this.fetchInstruments()}},methods:{loadRoutData(){this.instrumentFilter=this.$route.params.filter.split("-and-")},fetchInstruments(){(0,v.pB)().then((e=>{this.instruments=e.data.filter((e=>this.instrumentFilter.includes(e.type)))})).catch((e=>{console.error("Error fetching instruments:",e)}))}}};var D=s(7716);const T=(0,x.A)(X,[["render",n]]),z=T;P()(X,"components",{QPage:D.A,QCard:F.A,QCardSection:q.A})}}]);